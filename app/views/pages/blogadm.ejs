<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Admin - Vintélo</title>
    <link rel="stylesheet" href="css/blogadm.css">
    <link rel="icon" href="/imagens/brilhoescuro.png" type="image/x-icon">
</head>
<body>
    <!-- Header Mobile -->
    <header class="mobile-header">
        <a href="javascript:void(0)" onclick="goBack()">
            <img src="imagens/seta.png" alt="Voltar">
        </a>
        <h1><span class="highlight">VINTÉLO</span></h1>
        <a href="javascript:void(0)" onclick="goBack()">
            <img src="imagens/carrinho.png" alt="Home">
        </a>
    </header>

    <!-- Header Desktop -->
    <section class="oculto-mobile">
        <section class="discount-banner">
            <span class="highlight">Painel Administrativo - Gerenciar Blog</span>
        </section>
        <header class="main-header">
            <a href="/homeadm">
                <img src="imagens/logo.png" class="img-logo">
            </a>
            <nav>
                <a href="/homeadm">Home Admin</a>
                <a href="/denuncias">Denúncias</a>
                <a href="/avaliacaoadm">Avaliações</a>
                <a href="/editarbanners">Banners</a>
            </nav>
            <section class="search-profile">
                <form>
                    <input type="text" placeholder="Buscar posts...">
                </form>
                <ul>
                    <li><a href="/homeadm"><img src="imagens/icone sem cadastro.png" class="maria" style="border-radius: 50%;"></a></li>
                    <li><a href="/homeadm"><img src="imagens/icone saco.png" class="img-tamanho"></a></li>
                    <li><a href="/homeadm"><img src="imagens/icone coraçao.png" class="img-tamanho2"></a></li>
                </ul>
            </section>
        </header>
    </section>
    <!-- Admin Dashboard -->
    <main class="admin-dashboard">
        <!-- Actions Bar -->
        <section class="actions-bar">
            <button class="btn-primary" onclick="toggleForm()">
                <span>+</span> Novo Post
            </button>
            <section class="filters">
                <select id="filterStatus">
                    <option value="">Todos os Status</option>
                    <option value="publicado">Publicados</option>
                    <option value="rascunho">Rascunhos</option>
                    <option value="agendado">Agendados</option>
                </select>
                <select id="filterCategory">
                    <option value="">Todas Categorias</option>
                    <option value="Moda">Moda</option>
                    <option value="Tendência">Tendência</option>
                    <option value="Sustentabilidade">Sustentabilidade</option>
                    <option value="Style">Style</option>
                </select>
            </section>
        </section>

        <!-- Desktop Content -->
        <main class="desktop-content oculto-mobile">
            <% if (posts && posts.length > 0) { %>
                <% posts.forEach(post => { %>
                    <section class="featured-post">
                        <section class="post-content">
                            <span class="date"><%= post.DT_PUBLICACAO %></span>
                            <h3 class="category"><%= post.CATEGORIA || 'Geral' %></h3>
                            <h2 class="post-title"><%= post.TITULO %></h2>
                            <p class="post-excerpt"><%= typeof post.CONTEUDO === 'string' ? post.CONTEUDO.substring(0, 100) : post.CONTEUDO %>...</p>
                            <a href="/artigo" class="read-more">Ver agora</a>
                        </section>
                        <% 
                            let imagemPost = 'imagens/metalizado.png';
                            if (post.TITULO && (post.TITULO.includes('BOSS') || post.TITULO.includes('Boss'))) {
                                imagemPost = 'imagens/boss milão.png';
                            } else if (post.TITULO && (post.TITULO.includes('Gucci') || post.TITULO.includes('GUCCI'))) {
                                imagemPost = 'imagens/gucci-milao 1.png';
                            } else if (post.TITULO && (post.TITULO.includes('Sweet') || post.TITULO.includes('SWEET') || post.TITULO.includes('sweer'))) {
                                imagemPost = 'imagens/tendencia sweer.png';
                            } else if (post.TITULO && (post.TITULO.includes('Sustentável') || post.TITULO.includes('SUSTENTÁVEL') || post.TITULO.includes('sustentável'))) {
                                imagemPost = 'imagens/tendencia sustentável.png';
                            } else if (post.TITULO && (post.TITULO.includes('Moda') && post.TITULO.includes('Sustentável'))) {
                                imagemPost = 'imagens/moda sustentável.png';
                            }
                        %>
                        <img src="<%= imagemPost %>" alt="<%= post.TITULO %>" class="post-image">
                        <section class="admin-controls">
                            <a href="/editarpost/<%= post.ID_ARTIGO %>" class="admin-btn">Editar</a>
                            <a href="/blogadm/excluir/<%= post.ID_ARTIGO %>" class="admin-btn" onclick="return confirm('Excluir artigo?')">Excluir</a>
                        </section>
                    </section>
                <% }); %>
            <% } else { %>
                <section class="featured-post">
                    <p>Nenhum artigo encontrado. <a href="#" onclick="toggleForm()">Criar primeiro artigo</a></p>
                </section>
            <% } %>
        </main>

        <!-- Mobile Content -->
        <main class="mobile-content mobile-only">
            <% if (posts && posts.length > 0) { %>
                <% posts.forEach((post, index) => { %>
                    <% if (index === 0) { %>
                        <section class="mobile-hero">
                            <% 
                                let imagemMobile = 'imagens/metalizado.png';
                                if (post.TITULO && (post.TITULO.includes('BOSS') || post.TITULO.includes('Boss'))) {
                                    imagemMobile = 'imagens/boss milão 2.png';
                                } else if (post.TITULO && (post.TITULO.includes('Gucci') || post.TITULO.includes('GUCCI'))) {
                                    imagemMobile = 'imagens/gucci-milao 1.png';
                                } else if (post.TITULO && (post.TITULO.includes('Sweet') || post.TITULO.includes('SWEET') || post.TITULO.includes('sweer'))) {
                                    imagemMobile = 'imagens/tendencia sweer.png';
                                } else if (post.TITULO && (post.TITULO.includes('Sustentável') || post.TITULO.includes('SUSTENTÁVEL') || post.TITULO.includes('sustentável'))) {
                                    imagemMobile = 'imagens/tendencia sustentável.png';
                                } else if (post.TITULO && (post.TITULO.includes('Moda') && post.TITULO.includes('Sustentável'))) {
                                    imagemMobile = 'imagens/moda sustentável.png';
                                }
                            %>
                            <img src="<%= imagemMobile %>" alt="<%= post.TITULO %>" class="hero-image">
                            <section class="mobile-card-content">
                                <h2><%= post.TITULO %></h2>
                                <a href="/artigo">Ver artigo</a>
                            </section>
                            <section class="admin-controls">
                                <a href="/editarpost/<%= post.ID_ARTIGO %>" class="admin-btn">Editar</a>
                                <a href="/blogadm/excluir/<%= post.ID_ARTIGO %>" class="admin-btn" onclick="return confirm('Excluir artigo?')">Excluir</a>
                            </section>
                        </section>
                        <section class="mobile-articles">
                    <% } else { %>
                        <article class="mobile-card">
                            <% 
                                let imagemCard = 'imagens/metalizado.png';
                                if (post.TITULO && (post.TITULO.includes('BOSS') || post.TITULO.includes('Boss'))) {
                                    imagemCard = 'imagens/boss milão 2.png';
                                } else if (post.TITULO && (post.TITULO.includes('Gucci') || post.TITULO.includes('GUCCI'))) {
                                    imagemCard = 'imagens/gucci-milao 1.png';
                                } else if (post.TITULO && (post.TITULO.includes('Sweet') || post.TITULO.includes('SWEET') || post.TITULO.includes('sweer'))) {
                                    imagemCard = 'imagens/tendencia sweer.png';
                                } else if (post.TITULO && (post.TITULO.includes('Sustentável') || post.TITULO.includes('SUSTENTÁVEL') || post.TITULO.includes('sustentável'))) {
                                    imagemCard = 'imagens/tendencia sustentável.png';
                                } else if (post.TITULO && (post.TITULO.includes('Moda') && post.TITULO.includes('Sustentável'))) {
                                    imagemCard = 'imagens/moda sustentável.png';
                                }
                            %>
                            <img src="<%= imagemCard %>" alt="<%= post.TITULO %>">
                            <section class="mobile-card-content">
                                <h2><%= post.TITULO %></h2>
                                <a href="/artigo">Ver artigo</a>
                            </section>
                            <section class="admin-controls">
                                <a href="/editarpost/<%= post.ID_ARTIGO %>" class="admin-btn">Editar</a>
                                <a href="/blogadm/excluir/<%= post.ID_ARTIGO %>" class="admin-btn" onclick="return confirm('Excluir artigo?')">Excluir</a>
                            </section>
                        </article>
                    <% } %>
                <% }); %>
                </section>
            <% } else { %>
                <section class="mobile-hero">
                    <p>Nenhum artigo encontrado.</p>
                </section>
            <% } %>
        </main>
    </main>

    <!-- Modal Form -->
    <section class="modal-overlay" id="postModal" style="display: none;">
        <section class="modal-content">
            <section class="modal-header">
                <h3>Criar Novo Post</h3>
                <button class="modal-close" onclick="toggleForm()">&times;</button>
            </section>
            <form action="/blogadm" method="post" enctype="multipart/form-data" onsubmit="return handleSubmit(event)">
                <section class="form-row">
                    <section class="form-group">
                        <label for="titulo">Título:</label>
                        <input type="text" id="titulo" name="titulo" required>
                    </section>
                    <section class="form-group">
                        <label for="categoria">Categoria:</label>
                        <select id="categoria" name="categoria" required>
                            <option value="">Selecione...</option>
                            <option value="Moda">Moda</option>
                            <option value="Tendência">Tendência</option>
                            <option value="Sustentabilidade">Sustentabilidade</option>
                            <option value="Style">Style</option>
                            <option value="BOSS">BOSS</option>
                            <option value="Gucci">Gucci</option>
                        </select>
                    </section>
                </section>
                <section class="form-row">
                    <section class="form-group">
                        <label for="autor">Autor:</label>
                        <input type="text" id="autor" name="autor" value="Vintélo Fashion" required>
                    </section>
                    <section class="form-group">
                        <label for="tempo_leitura">Tempo de Leitura (min):</label>
                        <input type="number" id="tempo_leitura" name="tempo_leitura" min="1" max="60" value="5">
                    </section>
                </section>
                <section class="form-group">
                    <label for="resumo">Resumo/Excerpt:</label>
                    <textarea id="resumo" name="resumo" rows="3" placeholder="Breve descrição do artigo..."></textarea>
                </section>
                <section class="form-group">
                    <label for="imagem">Imagem Principal:</label>
                    <input type="file" id="imagem" name="imagem" accept="image/*">
                </section>
                <section class="form-group">
                    <label for="conteudo">Conteúdo:</label>
                    <textarea id="conteudo" name="conteudo" rows="8" required></textarea>
                </section>
                <section class="form-row">
                    <section class="form-group">
                        <label for="tags">Tags (separadas por vírgula):</label>
                        <input type="text" id="tags" name="tags" placeholder="moda, sustentável, tendência">
                    </section>
                    <section class="form-group">
                        <label for="status">Status:</label>
                        <select id="status" name="status" required>
                            <option value="rascunho">Rascunho</option>
                            <option value="publicado" selected>Publicar</option>
                            <option value="agendado">Agendar</option>
                        </select>
                    </section>
                </section>
                <section class="form-actions">
                    <button type="button" class="btn-secondary" onclick="toggleForm()">Cancelar</button>
                    <button type="submit" class="btn-primary">Publicar Post</button>
                </section>
            </form>
        </section>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <img src="imagens/logo_vintélo_clara 1.png" alt="Vintélo" class="footer-image">
        <section class="social-media">
            <p>Siga nossas redes sociais</p>
            <ul class="social-links">
                <li><a href="https://facebook.com" target="_blank" class="social-link">
                    <img src="imagens/Facebook.png" alt="Facebook"></a></li>
                <li><a href="https://pinterest.com" target="_blank" class="social-link">
                    <img src="imagens/Pinterest.png" alt="Pinterest"></a></li>
                <li><a href="https://www.instagram.com/vintelobrechos" target="_blank" class="social-link">
                    <img src="imagens/Instagram.png" alt="Instagram"></a></li>
            </ul>
        </section>
        <p class="copyright">©2024 Vintélo. Todos os direitos reservados.</p>
    </footer>
    <script src="/js/perfil-autenticado.js"></script>
    <script src="/js/blog.js"></script>
    <script src="/js/navegacao.js"></script>
</body>
</html>